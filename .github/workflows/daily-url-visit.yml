name: Daily URL Visit with Logging

on:
  schedule:
    # 北京时间 09:00 = UTC 01:00
    - cron: '0 1 * * *'
    # 北京时间 17:00 = UTC 09:00  
    - cron: '0 9 * * *'
  workflow_dispatch:      # 可手动触发

jobs:
  visit-url:
    runs-on: ubuntu-latest
    steps:
      - name: Visit URL and log result
        run: |
          URL="https://my9.ltd/tv/tv1288.php?auto=1"
          echo "开始访问 $URL"
          
          # 使用 curl 请求，并获取 HTTP 状态码
          HTTP_STATUS=$(curl -o /dev/null -s -w "%{http_code}" $URL)
          
          if [ "$HTTP_STATUS" -eq 200 ]; then
            echo "✅ 访问成功: $URL (HTTP $HTTP_STATUS)"
          else
            echo "❌ 访问失败: $URL (HTTP $HTTP_STATUS)"
          fi
